<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AD-HTC Fuel-Enhanced Power Gas Cycle — MEG 315 Group 9</title>
    <meta name="description"
        content="Interactive AD-HTC Fuel-Enhanced Power Gas Cycle design and thermodynamic analysis with H-S and T-Ḣ diagrams. Energhx Research Group, University of Lagos.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <!-- ═══════════════════ HEADER ═══════════════════ -->
    <header class="app-header">
        <div class="header-glow"></div>
        <div class="header-content">
            <div class="header-badge">MEG 315 — Group 9 | Energhx Research Group</div>
            <h1>AD-HTC <span class="accent">Fuel-Enhanced</span> Power Gas Cycle</h1>
            <p class="subtitle">Anaerobic Digestion + Hydrothermal Carbonization — Interactive Design &amp;
                Thermodynamic Analysis</p>
        </div>
    </header>

    <!-- ═══════════════════ MAIN LAYOUT ═══════════════════ -->
    <main class="main-grid">

        <!-- ── SCHEMATIC PANEL ── -->
        <section class="panel schematic-panel" id="schematic-panel">
            <div class="panel-header">
                <h2>Cycle Schematic</h2>
                <span class="panel-tag">Interactive</span>
            </div>
            <div class="schematic-wrapper" id="schematic-wrapper">
                <svg id="cycle-svg" viewBox="0 0 1200 820" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <!-- Gradients -->
                        <linearGradient id="homoGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#a78bfa" />
                            <stop offset="100%" stop-color="#7c3aed" />
                        </linearGradient>
                        <linearGradient id="boilGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#f43f5e" />
                            <stop offset="100%" stop-color="#be123c" />
                        </linearGradient>
                        <linearGradient id="adGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#22d3ee" />
                            <stop offset="100%" stop-color="#0891b2" />
                        </linearGradient>
                        <linearGradient id="collGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#2dd4bf" />
                            <stop offset="100%" stop-color="#0d9488" />
                        </linearGradient>
                        <linearGradient id="reactGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#fb923c" />
                            <stop offset="100%" stop-color="#c2410c" />
                        </linearGradient>
                        <linearGradient id="combGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#fbbf24" />
                            <stop offset="100%" stop-color="#b45309" />
                        </linearGradient>
                        <linearGradient id="compGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#60a5fa" />
                            <stop offset="100%" stop-color="#1d4ed8" />
                        </linearGradient>
                        <linearGradient id="turbGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#f87171" />
                            <stop offset="100%" stop-color="#b91c1c" />
                        </linearGradient>
                        <linearGradient id="genGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#fde68a" />
                            <stop offset="100%" stop-color="#d97706" />
                        </linearGradient>
                        <!-- Arrow markers -->
                        <marker id="arrGreen" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                            <polygon points="0 0,8 3,0 6" fill="#4ade80" />
                        </marker>
                        <marker id="arrCyan" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                            <polygon points="0 0,8 3,0 6" fill="#22d3ee" />
                        </marker>
                        <marker id="arrOrange" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                            <polygon points="0 0,8 3,0 6" fill="#fb923c" />
                        </marker>
                        <marker id="arrBlue" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                            <polygon points="0 0,8 3,0 6" fill="#60a5fa" />
                        </marker>
                        <marker id="arrGray" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                            <polygon points="0 0,8 3,0 6" fill="#94a3b8" />
                        </marker>
                        <marker id="arrYellow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                            <polygon points="0 0,8 3,0 6" fill="#fbbf24" />
                        </marker>
                        <marker id="arrPurple" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                            <polygon points="0 0,8 3,0 6" fill="#c084fc" />
                        </marker>
                        <marker id="arrTeal" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
                            <polygon points="0 0,8 3,0 6" fill="#2dd4bf" />
                        </marker>
                        <!-- Glow filter -->
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="3" result="blur" />
                            <feMerge>
                                <feMergeNode in="blur" />
                                <feMergeNode in="SourceGraphic" />
                            </feMerge>
                        </filter>
                        <filter id="softGlow">
                            <feGaussianBlur stdDeviation="5" result="blur" />
                            <feMerge>
                                <feMergeNode in="blur" />
                                <feMergeNode in="SourceGraphic" />
                            </feMerge>
                        </filter>
                        <!-- Particle circle -->
                        <circle id="dot" r="4" />
                    </defs>

                    <style>
                        .comp-box {
                            rx: 8;
                            filter: url(#glow);
                        }

                        .svg-lbl {
                            font-family: 'Inter', sans-serif;
                            font-weight: 700;
                            text-anchor: middle;
                            dominant-baseline: middle;
                        }

                        .svg-sub {
                            font-family: 'Inter', sans-serif;
                            font-weight: 400;
                            text-anchor: middle;
                            dominant-baseline: middle;
                        }

                        .svg-ext {
                            font-family: 'Inter', sans-serif;
                            font-weight: 500;
                            dominant-baseline: middle;
                        }

                        .section-lbl {
                            font-family: 'Inter', sans-serif;
                            font-weight: 800;
                            text-anchor: middle;
                        }

                        .state-dot {
                            filter: url(#glow);
                        }

                        @keyframes pulse {

                            0%,
                            100% {
                                opacity: 1;
                                r: 5
                            }

                            50% {
                                opacity: 0.6;
                                r: 7
                            }
                        }

                        @keyframes spin {
                            from {
                                transform-origin: 1060px 660px;
                                transform: rotate(0deg)
                            }

                            to {
                                transform-origin: 1060px 660px;
                                transform: rotate(360deg)
                            }
                        }

                        @keyframes dash {
                            to {
                                stroke-dashoffset: -40
                            }
                        }

                        @keyframes flowGreen {
                            0% {
                                stroke-dashoffset: 200
                            }

                            100% {
                                stroke-dashoffset: 0
                            }
                        }

                        .flow-anim {
                            stroke-dasharray: 6, 10;
                            animation: dash 1.2s linear infinite;
                        }

                        .flow-anim-slow {
                            stroke-dasharray: 6, 14;
                            animation: dash 2s linear infinite;
                        }

                        .pulse-dot {
                            animation: pulse 1.8s ease-in-out infinite;
                        }

                        .spin-grp {
                            animation: spin 1.8s linear infinite;
                            transform-box: fill-box;
                            transform-origin: center;
                        }
                    </style>

                    <!-- ══════════ BACKGROUND GRID (animated, subtle) ══════════ -->
                    <defs>
                        <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                            <path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(56,189,248,0.07)" stroke-width="0.8" />
                        </pattern>
                    </defs>
                    <rect width="1200" height="820" fill="url(#grid)" rx="16" />

                    <!-- ══════════ SECTION: HTC STEAM CYCLE (dashed box) ══════════ -->
                    <rect x="150" y="215" width="415" height="225" rx="14" fill="rgba(139,92,246,0.05)" stroke="#7c3aed"
                        stroke-width="1.5" stroke-dasharray="8,4" />
                    <text x="357" y="236" class="section-lbl" font-size="11" fill="#a78bfa" opacity="0.85">HTC STEAM
                        CYCLE (RANKINE)</text>

                    <!-- ══════════ SECTION: GAS CYCLE (dashed box at bottom) ══════════ -->
                    <rect x="140" y="560" width="940" height="220" rx="14" fill="rgba(59,130,246,0.04)" stroke="#3b82f6"
                        stroke-width="1.5" stroke-dasharray="8,4" />
                    <text x="610" y="800" class="section-lbl" font-size="16" fill="#60a5fa">AD-HTC Fuel-Enhanced Gas
                        Power Cycle</text>

                    <!-- ══════════════════════════════════════════════════════════ -->
                    <!--   FLOW PIPES (drawn first, under components)              -->
                    <!-- ══════════════════════════════════════════════════════════ -->

                    <!-- 1. Biomass Feedstock → Homogenizer -->
                    <line x1="90" y1="133" x2="155" y2="133" stroke="#4ade80" stroke-width="2.5"
                        marker-end="url(#arrGreen)" class="flow-anim-slow" />

                    <!-- 2. Homogenizer → top arch → AD (moisture-rich, CYAN) -->
                    <polyline points="340,133 340,52 930,52 930,98" fill="none" stroke="#22d3ee" stroke-width="2.5"
                        marker-end="url(#arrCyan)" class="flow-anim-slow" />

                    <!-- 3. Homogenizer → down → Reactor (moisture-lean, GREEN) -->
                    <polyline points="247,168 247,327 358,327" fill="none" stroke="#4ade80" stroke-width="2.5"
                        marker-end="url(#arrGreen)" class="flow-anim" />

                    <!-- 4. Pump → Boiler (feedwater up, PURPLE — routed right of Homogenizer) -->
                    <polyline points="247,310 355,310 355,120 438,120" fill="none" stroke="#c084fc" stroke-width="2"
                        marker-end="url(#arrPurple)" class="flow-anim-slow" />

                    <!-- 6. AD → down → Enhanced Biogas Collector (GREEN) -->
                    <polyline points="930,168 930,258 812,258" fill="none" stroke="#4ade80" stroke-width="2.5"
                        marker-end="url(#arrGreen)" class="flow-anim" />

                    <!-- 7. Biogas Collector → right → Biogas Distribution (TEAL) -->
                    <line x1="815" y1="275" x2="985" y2="275" stroke="#2dd4bf" stroke-width="2.5"
                        marker-end="url(#arrTeal)" class="flow-anim-slow" />

                    <!-- 8. Biogas Collector → down → Combustion Chamber (YELLOW/ORANGE) -->
                    <polyline points="728,318 728,400 600,400 600,418" fill="none" stroke="#fbbf24" stroke-width="2.5"
                        marker-end="url(#arrYellow)" class="flow-anim" />

                    <!-- 9. Reactor → Volatile Matters (down, GRAY) -->
                    <polyline points="435,368 435,415 475,415" fill="none" stroke="#94a3b8" stroke-width="1.8"
                        marker-end="url(#arrGray)" class="flow-anim-slow" />

                    <!-- 9b. Boiler → Reactor (DOWN — steam/heat from Boiler into Reactor, ORANGE) -->
                    <polyline points="514,182 514,240 475,240 475,287" fill="none" stroke="#fb923c" stroke-width="2.2"
                        marker-end="url(#arrOrange)" class="flow-anim" />

                    <!-- 9c. Reactor → Enhanced Biogas Collector (RIGHT — HTC volatile products, TEAL) -->
                    <polyline points="513,318 595,318 595,270 640,270" fill="none" stroke="#2dd4bf" stroke-width="2.2"
                        marker-end="url(#arrTeal)" class="flow-anim" />

                    <!-- 10. Combustion Chamber → left-down → Compressor exit/hot gas (ORANGE) -->
                    <!-- Air from compressor → up to combustion chamber -->
                    <polyline points="390,640 440,640 440,457 478,457" fill="none" stroke="#60a5fa" stroke-width="2.5"
                        marker-end="url(#arrBlue)" class="flow-anim" />

                    <!-- 11. Combustion Chamber → right-down → Turbine (HOT GAS, ORANGE) -->
                    <polyline points="722,457 810,457 810,640 820,640" fill="none" stroke="#fb923c" stroke-width="2.5"
                        marker-end="url(#arrOrange)" class="flow-anim" />

                    <!-- 12. Shaft line (dash-dot center line) -->
                    <line x1="390" y1="635" x2="820" y2="635" stroke="#64748b" stroke-width="2"
                        stroke-dasharray="12,5,3,5" />
                    <text x="605" y="622" class="svg-sub" font-size="10" fill="#64748b">← Shaft →</text>

                    <!-- 13. Air inlet (up into Compressor from below) -->
                    <line x1="275" y1="765" x2="275" y2="700" stroke="#94a3b8" stroke-width="2.5"
                        marker-end="url(#arrGray)" class="flow-anim-slow" />

                    <!-- 14. Exhaust Gases (out from Turbine, down-right) -->
                    <line x1="950" y1="700" x2="950" y2="770" stroke="#94a3b8" stroke-width="2.5"
                        marker-end="url(#arrGray)" class="flow-anim-slow" />

                    <!-- ══════════════════════════════════ -->
                    <!--   COMPONENTS                       -->
                    <!-- ══════════════════════════════════ -->

                    <!-- ── BIOMASS FEEDSTOCK HOMOGENIZER ── -->
                    <g class="component"
                        data-tooltip="Biomass Feedstock Homogenizer — Separates biomass into moisture-rich and moisture-lean streams">
                        <rect x="155" y="96" width="185" height="70" rx="9" fill="url(#homoGrad)" stroke="#c084fc"
                            stroke-width="1.8" filter="url(#glow)" />
                        <text x="247" y="123" class="svg-lbl" font-size="10" fill="white">Biomass Feedstock</text>
                        <text x="247" y="138" class="svg-sub" font-size="9" fill="#ddd6fe">Homogenizer</text>
                    </g>

                    <!-- ── BOILER ── -->
                    <g class="component" data-tooltip="Boiler — Generates steam from HTC process heat">
                        <rect x="438" y="116" width="152" height="66" rx="9" fill="url(#boilGrad)" stroke="#fb7185"
                            stroke-width="1.8" filter="url(#glow)" />
                        <text x="514" y="144" class="svg-lbl" font-size="11" fill="white">Boiler</text>
                        <text x="514" y="160" class="svg-sub" font-size="9" fill="#fda4af">HTC Boiler</text>
                    </g>

                    <!-- ── AD (Anaerobic Digestion) ── -->
                    <g class="component"
                        data-tooltip="Anaerobic Digestion — Decomposes moisture-rich biomass to produce biogas">
                        <rect x="875" y="98" width="110" height="70" rx="9" fill="url(#adGrad)" stroke="#22d3ee"
                            stroke-width="1.8" filter="url(#glow)" />
                        <text x="930" y="126" class="svg-lbl" font-size="12" fill="white">AD</text>
                        <text x="930" y="143" class="svg-sub" font-size="8" fill="#a5f3fc">Anaerobic</text>
                    </g>

                    <!-- ── ENHANCED BIOGAS COLLECTOR ── -->
                    <g class="component"
                        data-tooltip="Enhanced Biogas Collector — Collects and distributes biogas from AD">
                        <rect x="640" y="232" width="175" height="75" rx="9" fill="url(#collGrad)" stroke="#2dd4bf"
                            stroke-width="1.8" filter="url(#glow)" />
                        <text x="727" y="261" class="svg-lbl" font-size="10" fill="white">Enhanced Biogas</text>
                        <text x="727" y="277" class="svg-sub" font-size="9" fill="#99f6e4">Collector</text>
                    </g>

                    <!-- ── REACTOR (HTC) ── -->
                    <g class="component"
                        data-tooltip="HTC Reactor — Hydrothermal Carbonization of moisture-lean biomass">
                        <rect x="358" y="287" width="155" height="81" rx="9" fill="url(#reactGrad)" stroke="#fb923c"
                            stroke-width="1.8" filter="url(#glow)" />
                        <text x="435" y="320" class="svg-lbl" font-size="10" fill="white">Reactor</text>
                        <text x="435" y="337" class="svg-sub" font-size="9" fill="#fed7aa">HTC</text>
                    </g>

                    <!-- ── PUMP SYMBOL (circle with + inside) ── -->
                    <g class="component" data-tooltip="Feed Pump — Returns condensate to boiler pressure">
                        <circle cx="247" cy="340" r="33" fill="#1a1a3e" stroke="#c084fc" stroke-width="2"
                            filter="url(#glow)" />
                        <line x1="247" y1="317" x2="247" y2="363" stroke="#c084fc" stroke-width="2" />
                        <line x1="224" y1="340" x2="270" y2="340" stroke="#c084fc" stroke-width="2" />
                        <!-- pump arc -->
                        <path d="M 230 330 A 22 22 0 0 1 264 330" fill="none" stroke="#a78bfa" stroke-width="1.5" />
                    </g>

                    <!-- HTC Steam Cycle - Pump label -->
                    <text x="247" y="385" class="svg-sub" text-anchor="middle" font-size="9" fill="#c084fc">Feed
                        Pump</text>

                    <!-- ── BIOGAS COMBUSTION CHAMBER ── -->
                    <g class="component"
                        data-tooltip="Biogas Combustion Chamber — Burns biogas with compressed air for the gas turbine">
                        <rect x="478" y="418" width="244" height="80" rx="9" fill="url(#combGrad)" stroke="#f59e0b"
                            stroke-width="2" filter="url(#glow)" />
                        <text x="600" y="450" class="svg-lbl" font-size="11" fill="#1a0500">Biogas Combustion</text>
                        <text x="600" y="466" class="svg-sub" font-size="10" fill="#1a0500">Chamber</text>
                        <!-- Flame detail lines -->
                        <line x1="540" y1="424" x2="540" y2="418" stroke="#fef3c7" stroke-width="1.5" opacity="0.6" />
                        <line x1="600" y1="424" x2="600" y2="418" stroke="#fef3c7" stroke-width="1.5" opacity="0.6" />
                        <line x1="660" y1="424" x2="660" y2="418" stroke="#fef3c7" stroke-width="1.5" opacity="0.6" />
                    </g>

                    <!-- ══ COMPRESSOR (Trapezoid — wider left = air inlet, tapers right) ══ -->
                    <g class="component" data-tooltip="Compressor — Compresses inlet air using shaft work from turbine">
                        <polygon points="175,588 390,615 390,658 175,685" fill="url(#compGrad)" stroke="#93c5fd"
                            stroke-width="2" filter="url(#glow)" />
                        <!-- Internal blade lines -->
                        <line x1="230" y1="594" x2="230" y2="678" stroke="#bfdbfe" stroke-width="1" opacity="0.5" />
                        <line x1="280" y1="599" x2="280" y2="672" stroke="#bfdbfe" stroke-width="1" opacity="0.5" />
                        <line x1="330" y1="605" x2="330" y2="667" stroke="#bfdbfe" stroke-width="1" opacity="0.5" />
                        <text x="283" y="638" class="svg-lbl" font-size="12" fill="white">Compressor</text>
                        <!-- State dots -->
                        <circle cx="175" cy="635" r="6" fill="#38bdf8" class="state-dot pulse-dot" />
                        <text x="160" y="620" class="svg-ext" font-size="11" fill="#38bdf8">①</text>
                        <circle cx="390" cy="635" r="6" fill="#38bdf8" class="state-dot pulse-dot" />
                        <text x="397" y="620" class="svg-ext" font-size="11" fill="#38bdf8">②</text>
                    </g>
                    <text x="283" y="700" class="svg-sub" text-anchor="middle" font-size="11"
                        fill="#94a3b8">Compressor</text>

                    <!-- ══ TURBINE (Trapezoid — narrow left = hot gas in, wider right = exhaust) ══ -->
                    <g class="component" data-tooltip="Gas Turbine — Expands hot combustion gas to produce shaft work">
                        <polygon points="820,615 1025,588 1025,685 820,658" fill="url(#turbGrad)" stroke="#fca5a5"
                            stroke-width="2" filter="url(#glow)" />
                        <!-- Internal blade lines -->
                        <line x1="870" y1="617" x2="870" y2="657" stroke="#fecaca" stroke-width="1" opacity="0.5" />
                        <line x1="920" y1="611" x2="920" y2="662" stroke="#fecaca" stroke-width="1" opacity="0.5" />
                        <line x1="970" y1="605" x2="970" y2="668" stroke="#fecaca" stroke-width="1" opacity="0.5" />
                        <text x="920" y="638" class="svg-lbl" font-size="12" fill="white">Turbine</text>
                        <!-- State dots -->
                        <circle cx="820" cy="635" r="6" fill="#f59e0b" class="state-dot pulse-dot" />
                        <text x="800" y="620" class="svg-ext" font-size="11" fill="#f59e0b">④</text>
                        <circle cx="1025" cy="635" r="6" fill="#ef4444" class="state-dot pulse-dot" />
                        <text x="1033" y="620" class="svg-ext" font-size="11" fill="#ef4444">⑤</text>
                    </g>
                    <text x="922" y="700" class="svg-sub" text-anchor="middle" font-size="11"
                        fill="#94a3b8">Turbine</text>

                    <!-- ══ STATE POINTS in combustion chamber ══ -->
                    <circle cx="478" cy="457" r="6" fill="#f59e0b" class="state-dot pulse-dot" />
                    <text x="460" y="443" class="svg-ext" font-size="11" fill="#f59e0b">③</text>

                    <!-- ══ GENERATOR / SPINNING ELEMENT at turbine exit ══ -->
                    <g filter="url(#softGlow)">
                        <circle cx="1075" cy="635" r="32" fill="url(#genGrad)" stroke="#fbbf24" stroke-width="2.5" />
                        <!-- Spinning arrows (rotation symbol) -->
                        <g class="spin-grp">
                            <path d="M1075,608 A27,27 0 1,1 1048,635" fill="none" stroke="#1a0a00" stroke-width="3"
                                stroke-linecap="round" />
                            <polygon points="1075,603 1081,614 1069,614" fill="#1a0a00" />
                        </g>
                        <text x="1075" y="635" class="svg-lbl" font-size="8" fill="#1a0a00">GEN</text>
                    </g>
                    <!-- Turbine → Generator connection line -->
                    <line x1="1025" y1="635" x2="1043" y2="635" stroke="#fbbf24" stroke-width="2.5" />

                    <!-- ══════════════════════════════════ -->
                    <!--   EXTERNAL LABELS & ANNOTATIONS    -->
                    <!-- ══════════════════════════════════ -->

                    <!-- Biomass Feedstock input label -->
                    <text x="42" y="124" class="svg-ext" font-size="11" fill="#94a3b8">Biomass</text>
                    <text x="42" y="140" class="svg-ext" font-size="11" fill="#94a3b8">Feedstock</text>

                    <!-- Moisture-rich label (along top arrow) -->
                    <text x="635" y="42" class="svg-sub" text-anchor="middle" font-size="10"
                        fill="#22d3ee">Moisture-rich Biomass Feedstock</text>

                    <!-- Moisture-lean label (along left arrow) -->
                    <text x="182" y="248" class="svg-ext" font-size="10" fill="#4ade80">Moisture-lean</text>
                    <text x="182" y="262" class="svg-ext" font-size="10" fill="#4ade80">Biomass</text>
                    <text x="182" y="276" class="svg-ext" font-size="10" fill="#4ade80">Feedstock</text>

                    <!-- Biogas Distribution label -->
                    <text x="992" y="263" class="svg-ext" font-size="10" fill="#2dd4bf">Biogas Distribution</text>
                    <text x="992" y="277" class="svg-ext" font-size="10" fill="#2dd4bf">to Building</text>
                    <text x="992" y="291" class="svg-ext" font-size="10" fill="#2dd4bf">Envelopes</text>

                    <!-- Volatile Matters label -->
                    <text x="415" y="398" class="svg-ext" font-size="9" fill="#94a3b8">Volatile Matters</text>
                    <text x="415" y="410" class="svg-ext" font-size="9" fill="#94a3b8">and Feedstock Waste</text>

                    <!-- Air label -->
                    <text x="266" y="782" class="svg-sub" text-anchor="middle" font-size="11" fill="#94a3b8">Air</text>

                    <!-- Exhaust label -->
                    <text x="952" y="782" class="svg-sub" text-anchor="middle" font-size="11" fill="#94a3b8">Exhaust
                        Gases</text>

                    <!-- Biogas Fuel label (from collector to combustion) -->
                    <text x="746" y="368" class="svg-ext" font-size="9" fill="#fbbf24">Biogas</text>
                    <text x="746" y="380" class="svg-ext" font-size="9" fill="#fbbf24">Fuel</text>

                    <!-- ══════════════════════════════════ -->
                    <!--   ANIMATED FLOW PARTICLES          -->
                    <!-- ══════════════════════════════════ -->

                    <!-- Particle: Biomass feedstock → Homogenizer -->
                    <circle r="4" fill="#4ade80" opacity="0.9">
                        <animateMotion dur="1.5s" repeatCount="indefinite" path="M90,133 L155,133" />
                    </circle>

                    <!-- Particle: Moisture-rich path (top) -->
                    <circle r="4" fill="#22d3ee" opacity="0.9">
                        <animateMotion dur="3s" repeatCount="indefinite" path="M340,133 L340,52 L930,52 L930,98" />
                    </circle>
                    <circle r="4" fill="#22d3ee" opacity="0.6">
                        <animateMotion dur="3s" begin="1.5s" repeatCount="indefinite"
                            path="M340,133 L340,52 L930,52 L930,98" />
                    </circle>

                    <!-- Particle: Moisture-lean → Reactor -->
                    <circle r="4" fill="#4ade80" opacity="0.9">
                        <animateMotion dur="2s" repeatCount="indefinite" path="M247,168 L247,327 L358,327" />
                    </circle>

                    <!-- Particle: Pump → Boiler (feedwater, rerouted right of Homogenizer) -->
                    <circle r="4" fill="#c084fc" opacity="0.85">
                        <animateMotion dur="2.5s" repeatCount="indefinite" path="M247,310 L355,310 L355,120 L438,120" />
                    </circle>

                    <!-- Particle: AD → Biogas Collector -->
                    <circle r="4" fill="#4ade80" opacity="0.9">
                        <animateMotion dur="2s" repeatCount="indefinite" path="M930,168 L930,258 L812,258" />
                    </circle>

                    <!-- Particle: Collector → Building distribution -->
                    <circle r="4" fill="#2dd4bf" opacity="0.9">
                        <animateMotion dur="2s" repeatCount="indefinite" path="M815,275 L985,275" />
                    </circle>

                    <!-- Particle: Collector → Combustion Chamber (biogas fuel) -->
                    <circle r="4" fill="#fbbf24" opacity="0.95">
                        <animateMotion dur="2s" repeatCount="indefinite" path="M728,318 L728,400 L600,400 L600,418" />
                    </circle>

                    <!-- Particle: Air → Compressor → Combustion Chamber (blue, compressed air) -->
                    <circle r="4" fill="#60a5fa" opacity="0.9">
                        <animateMotion dur="2s" repeatCount="indefinite"
                            path="M275,765 L275,700 L175,635 L390,635 L440,635 L440,457 L478,457" />
                    </circle>
                    <circle r="4" fill="#60a5fa" opacity="0.6">
                        <animateMotion dur="2s" begin="1s" repeatCount="indefinite"
                            path="M275,765 L275,700 L175,635 L390,635 L440,635 L440,457 L478,457" />
                    </circle>

                    <!-- Particle: Combustion → Turbine → Exhaust (hot gas, orange) -->
                    <circle r="5" fill="#fb923c" opacity="0.95">
                        <animateMotion dur="2s" repeatCount="indefinite"
                            path="M722,457 L810,457 L810,635 L1025,635 L1075,635" />
                    </circle>
                    <circle r="5" fill="#f87171" opacity="0.7">
                        <animateMotion dur="2s" begin="0.8s" repeatCount="indefinite"
                            path="M722,457 L810,457 L810,635 L1025,635 L1075,635" />
                    </circle>

                    <!-- Particle: Turbine exhaust out (down) -->
                    <circle r="4" fill="#94a3b8" opacity="0.7">
                        <animateMotion dur="1.5s" repeatCount="indefinite" path="M950,700 L950,770" />
                    </circle>

                    <!-- Particle: Boiler → Reactor (steam/heat DOWN, orange) -->
                    <circle r="4" fill="#fb923c" opacity="0.9">
                        <animateMotion dur="2s" repeatCount="indefinite" path="M514,182 L514,240 L475,240 L475,287" />
                    </circle>

                    <!-- Particle: Reactor → Enhanced Biogas Collector (HTC products RIGHT, teal) -->
                    <circle r="4" fill="#2dd4bf" opacity="0.9">
                        <animateMotion dur="2s" repeatCount="indefinite" path="M513,318 L595,318 L595,270 L640,270" />
                    </circle>

                    <!-- ══ LEGEND ══ -->
                    <g transform="translate(152,810)">
                        <line x1="0" y1="0" x2="22" y2="0" stroke="#22d3ee" stroke-width="2.5"
                            marker-end="url(#arrCyan)" />
                        <text x="28" y="4" class="svg-ext" font-size="9" fill="#94a3b8">Moisture-rich</text>
                        <line x1="140" y1="0" x2="162" y2="0" stroke="#4ade80" stroke-width="2.5"
                            marker-end="url(#arrGreen)" />
                        <text x="168" y="4" class="svg-ext" font-size="9" fill="#94a3b8">Biomass/Biogas</text>
                        <line x1="300" y1="0" x2="322" y2="0" stroke="#60a5fa" stroke-width="2.5"
                            marker-end="url(#arrBlue)" />
                        <text x="328" y="4" class="svg-ext" font-size="9" fill="#94a3b8">Compressed Air</text>
                        <line x1="450" y1="0" x2="472" y2="0" stroke="#fb923c" stroke-width="2.5"
                            marker-end="url(#arrOrange)" />
                        <text x="478" y="4" class="svg-ext" font-size="9" fill="#94a3b8">Hot Gas</text>
                        <line x1="560" y1="0" x2="582" y2="0" stroke="#fbbf24" stroke-width="2.5"
                            marker-end="url(#arrYellow)" />
                        <text x="588" y="4" class="svg-ext" font-size="9" fill="#94a3b8">Biogas Fuel</text>
                        <line x1="680" y1="0" x2="702" y2="0" stroke="#64748b" stroke-width="2.5"
                            stroke-dasharray="8,4" />
                        <text x="708" y="4" class="svg-ext" font-size="9" fill="#94a3b8">Shaft</text>
                        <circle cx="790" cy="0" r="4" fill="#38bdf8" class="pulse-dot" />
                        <text x="799" y="4" class="svg-ext" font-size="9" fill="#94a3b8">State Point</text>
                    </g>

                    <!-- Footer -->
                    <text x="600" y="816" text-anchor="middle" font-family="Inter,sans-serif" font-size="8"
                        fill="#334155">© 2025 Energhx Research Group — Faculty of Engineering, University of
                        Lagos</text>
                </svg>
            </div>
        </section>

        <!-- ── PARAMETERS PANEL ── -->
        <section class="panel params-panel" id="params-panel">
            <div class="panel-header">
                <h2>Cycle Parameters</h2>
                <span class="panel-tag">Inputs</span>
            </div>

            <div class="param-section">
                <h3 class="param-section-title">🔥 Gas Power Cycle (Brayton)</h3>

                <div class="param-group">
                    <label for="T1">Ambient Temperature, T₁ (K)</label>
                    <input type="number" id="T1" value="298" min="250" max="330" step="1">
                </div>
                <div class="param-group">
                    <label for="P1">Ambient Pressure, P₁ (kPa)</label>
                    <input type="number" id="P1" value="101.325" min="90" max="110" step="0.1">
                </div>
                <div class="param-group">
                    <label for="rp">Compressor Pressure Ratio, r_p</label>
                    <input type="number" id="rp" value="10" min="4" max="30" step="0.5">
                </div>
                <div class="param-group">
                    <label for="TIT">Turbine Inlet Temp, T₃ (K)</label>
                    <input type="number" id="TIT" value="1400" min="900" max="1800" step="10">
                </div>
                <div class="param-group">
                    <label for="eta_c">Compressor Isentropic Eff, η_c</label>
                    <input type="number" id="eta_c" value="0.86" min="0.7" max="0.98" step="0.01">
                </div>
                <div class="param-group">
                    <label for="eta_t">Turbine Isentropic Eff, η_t</label>
                    <input type="number" id="eta_t" value="0.89" min="0.7" max="0.98" step="0.01">
                </div>
                <div class="param-group">
                    <label for="LHV">Biogas LHV (kJ/kg)</label>
                    <input type="number" id="LHV" value="20000" min="10000" max="50000" step="500">
                </div>
                <div class="param-group">
                    <label for="m_air">Air Mass Flow Rate (kg/s)</label>
                    <input type="number" id="m_air" value="50" min="10" max="200" step="5">
                </div>
            </div>

            <div class="param-section">
                <h3 class="param-section-title">💨 HTC Steam Cycle (Rankine)</h3>

                <div class="param-group">
                    <label for="P_boiler">Boiler Pressure (MPa)</label>
                    <input type="number" id="P_boiler" value="4.0" min="0.5" max="15.0" step="0.5">
                </div>
                <div class="param-group">
                    <label for="T_steam">Steam Temperature (K)</label>
                    <input type="number" id="T_steam" value="673" min="450" max="850" step="10">
                </div>
                <div class="param-group">
                    <label for="P_cond">Condenser Pressure (kPa)</label>
                    <input type="number" id="P_cond" value="10" min="5" max="50" step="1">
                </div>
                <div class="param-group">
                    <label for="eta_st">Steam Turbine Eff, η_st</label>
                    <input type="number" id="eta_st" value="0.85" min="0.7" max="0.98" step="0.01">
                </div>
                <div class="param-group">
                    <label for="eta_fp">Feed Pump Eff, η_fp</label>
                    <input type="number" id="eta_fp" value="0.80" min="0.6" max="0.98" step="0.01">
                </div>
            </div>

            <div class="param-section">
                <h3 class="param-section-title">🌿 Biomass / AD Parameters</h3>

                <div class="param-group">
                    <label for="m_biomass">Biomass Feed Rate (kg/s)</label>
                    <input type="number" id="m_biomass" value="5" min="1" max="50" step="0.5">
                </div>
                <div class="param-group">
                    <label for="moisture_split">Moisture-Rich Fraction (0–1)</label>
                    <input type="number" id="moisture_split" value="0.6" min="0.3" max="0.9" step="0.05">
                </div>
                <div class="param-group">
                    <label for="ad_yield">AD Biogas Yield (m³/kg biomass)</label>
                    <input type="number" id="ad_yield" value="0.4" min="0.1" max="1.0" step="0.05">
                </div>
                <div class="param-group">
                    <label for="htc_temp">HTC Reactor Temp (K)</label>
                    <input type="number" id="htc_temp" value="523" min="453" max="573" step="5">
                </div>
            </div>

            <button class="analyse-btn" id="analyse-btn">
                <span class="btn-icon">📊</span>
                <span class="btn-text">Analyse</span>
                <span class="btn-glow"></span>
            </button>
        </section>

    </main>

    <!-- ═══════════════════ REPORT MODAL ═══════════════════ -->
    <div class="modal-overlay" id="report-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Thermodynamic Analysis Report</h2>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>

            <div class="report-grid">
                <!-- Performance Summary -->
                <div class="report-card performance-card">
                    <h3>⚡ Cycle Performance Summary</h3>
                    <div class="perf-metrics" id="perf-metrics"></div>
                </div>

                <!-- H-S Chart -->
                <div class="report-card chart-card">
                    <h3>📈 H-S Diagram — HTC Steam Cycle</h3>
                    <p class="chart-desc">Enthalpy vs Entropy for the HTC steam (Rankine) cycle processes</p>
                    <div class="chart-container">
                        <canvas id="hs-chart"></canvas>
                    </div>
                </div>

                <!-- T-Ḣ Chart -->
                <div class="report-card chart-card">
                    <h3>📉 T-Ḣ Diagram — Gas Power Cycle</h3>
                    <p class="chart-desc">Temperature vs Heat Rate for gas cycle processes (Compressor → Combustion →
                        Turbine)</p>
                    <div class="chart-container">
                        <canvas id="th-chart"></canvas>
                    </div>
                </div>

                <!-- Gas Cycle State Table -->
                <div class="report-card table-card">
                    <h3>🔥 Gas Cycle State Points</h3>
                    <div class="table-wrapper">
                        <table id="gas-table">
                            <thead>
                                <tr>
                                    <th>State</th>
                                    <th>Location</th>
                                    <th>T (K)</th>
                                    <th>P (kPa)</th>
                                    <th>h (kJ/kg)</th>
                                    <th>s (kJ/kg·K)</th>
                                </tr>
                            </thead>
                            <tbody id="gas-table-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- Steam Cycle State Table -->
                <div class="report-card table-card">
                    <h3>💧 HTC Steam Cycle State Points</h3>
                    <div class="table-wrapper">
                        <table id="steam-table">
                            <thead>
                                <tr>
                                    <th>State</th>
                                    <th>Location</th>
                                    <th>T (K)</th>
                                    <th>P (kPa)</th>
                                    <th>h (kJ/kg)</th>
                                    <th>s (kJ/kg·K)</th>
                                    <th>x</th>
                                </tr>
                            </thead>
                            <tbody id="steam-table-body"></tbody>
                        </table>
                    </div>
                </div>

                <!-- AD / Biomass Summary -->
                <div class="report-card table-card">
                    <h3>🌿 AD-HTC Mass &amp; Energy Balance</h3>
                    <div class="perf-metrics" id="ad-metrics"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="svg-tooltip" id="svg-tooltip"></div>

    <script src="script.js"></script>
</body>

</html>